<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Vocab</title>
</head>
<body>
<p id="question"></p>
<form id="box" onsubmit="return validate_form()">
    <input type="text" name="answer">
    <button type="submit">Submit</button>
</form>
<p id="result"></p>
<script>
    let index = 0
    function validate_form() {
        fetch("Vocab List.csv")
            .then(response => response.text())
            .then(vocab_list_csv => {
                let vocab_list = vocab_list_csv.split("\r\n")
                keys = []
                for (let i = 0; i < vocab_list.length - 1; i++) {
                    let key = vocab_list[i].split(",")
                    keys.push([key[0],key[1]])
                }
                // for (let i = 0; i < keys.length; i++) {
                    // let question = document.getElementById("question")
                    // question.textContent = keys[i][0]
                // }
                let question = document.getElementById("question")
                question.textContent = keys[index][0]
                let answer = document.forms["box"]["answer"].value
                let result_text
                if (answer.toLowerCase() == keys[index - 1][1].toLowerCase()) {
                    result_text = "correct"
                }
                else {
                    result_text = "incorrect"
                }
                let result = document.getElementById("result")
                result.textContent = result_text
            })
        // document.forms["box"]["answer"].value = ""
        // document.forms["box"]["answer"].focus()
        index += 1
        return false

    }
    // fetch_keys()
    fetch("Vocab List.csv")
        .then(response => response.text())
        .then(vocab_list_csv => {
            let vocab_list = vocab_list_csv.split("\r\n")
            keys = []
            for (let i = 0; i < vocab_list.length - 1; i++) {
                let key = vocab_list[i].split(",")
                keys.push([key[0],key[1]])
            }
            // for (let i = 0; i < keys.length; i++) {
                // let question = document.getElementById("question")
                // question.textContent = keys[i][0]
            // }
            let question = document.getElementById("question")
            question.textContent = keys[index][0]
        })

    // function fetched_keys() {
    //     fetch_keys(function() {
    //         console.log(keys)
    //     })
    // }

    // fetched_keys()

    // function validate_form() {
    //     let answer = document.forms["box"]["answer"].value
    //     let result_text
    //     if (answer == "hello") {
    //         result_text = "correct"
    //     }
    //     else {
    //         result_text = "incorrect"
    //     }
    //     let result = document.getElementById("result")
    //     result.textContent = result_text
    //     document.forms["box"]["answer"].value = ""
    //     document.forms["box"]["answer"].focus()
    //     index += 1
    //     fetch_keys()
    //     return false
    // }
</script>
</body>
</html>
