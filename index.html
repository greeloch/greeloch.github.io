<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>German Vocab</title>
</head>
<body>
<p id="question"></p>
<form id="box">
    <input type="text" name="answer">
    <button type="submit">Submit</button>
</form>
<p id="result"></p>
<script>
    let index = 22
    let keys = []
    async function fetch_it() {
        let vocab_list = await fetch("Vocab List.csv")
        vocab_list = await vocab_list.text()
        vocab_list = vocab_list.split("\r\n")
        let keys = []
        for (let i = 0; i < vocab_list.length - 1; i++) {
            let key = vocab_list[i].split(",")
            keys.push([key[0],key[1]])
        }
        return keys
    }
    async function begin_quiz() {
        keys = await fetch_it()
        document.getElementById("question").textContent = keys[index][0]
    }
    async function validate_form(event) {
        event.preventDefault()
        let answer = document.forms["box"]["answer"].value
        result = document.getElementById("result")
        if (normalize_german(answer) == normalize_german(keys[index][1])) {
            result.innerHTML = "correct"
        }
        else {
            result.innerHTML = "incorrect<br>the correct answer is: "
            + keys[index][1].toString()
        }
        index += 1
        document.getElementById("question").textContent = keys[index][0]
        document.forms["box"]["answer"].value = ""
        document.forms["box"]["answer"].focus()
    }
    function normalize_german(word) {
        return word
            .toLowerCase()
            .replaceAll("ä", "ae")
            .replaceAll("ö", "oe")
            .replaceAll("ü", "ue")
            .replaceAll("ß", "ss")
    }
    function normalize_german_lax(word) {
        return word
            .toLowerCase()
            .replaceAll("ä", "a")
            .replaceAll("ö", "o")
            .replaceAll("ü", "u")
            .replaceAll("ß", "s")
    }
    document.getElementById("box").addEventListener("submit", validate_form)
    begin_quiz()
</script>
</body>
</html>
